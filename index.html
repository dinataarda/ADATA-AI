<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ADATA AI CORE v3.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #00f2ff;
            --primary-glow: rgba(0, 242, 255, 0.5);
            --accent: #8e2de2;
            --bg: #020204;
            --ai-bubble: rgba(26, 26, 36, 0.7);
            --user-bubble: linear-gradient(135deg, #8e2de2, #4a00e0);
            --border: rgba(0, 242, 255, 0.15);
            --font-main: 'Space Grotesk', sans-serif;
        }

        /* --- Keyframes Animations --- */
        @keyframes glowPulse { 0% { box-shadow: 0 0 5px var(--primary-glow); } 50% { box-shadow: 0 0 20px var(--primary-glow); } 100% { box-shadow: 0 0 5px var(--primary-glow); } }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bgMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes typing { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background-color: var(--bg); 
            color: #e0e0e0; 
            font-family: var(--font-main); 
            height: 100vh; 
            overflow: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(142, 45, 226, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 242, 255, 0.1) 0%, transparent 40%),
                linear-gradient(180deg, #020204 0%, #0d0d1a 100%);
            background-size: 200% 200%;
            animation: bgMove 15s ease infinite;
        }

        /* --- PIN SECURITY --- */
        #pinOverlay { 
            position: fixed; inset: 0; background: rgba(0, 0, 0, 0.9); z-index: 9999; 
            display: flex; align-items: center; justify-content: center; backdrop-filter: blur(25px);
        }
        .pin-box { 
            text-align: center; width: 85%; max-width: 320px; padding: 40px 30px; 
            border-radius: 30px; border: 1px solid var(--border);
            background: rgba(10, 10, 15, 0.8); box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .pin-input { 
            background: rgba(0,0,0,0.5); border: 1px solid var(--primary); border-radius: 15px; 
            color: var(--primary); font-size: 32px; text-align: center; width: 100%; 
            padding: 15px; margin: 25px 0; outline: none; letter-spacing: 12px;
            box-shadow: inset 0 0 10px rgba(0, 242, 255, 0.1);
        }
        .pin-btn { 
            background: var(--primary); color: #000; border: none; padding: 18px; 
            border-radius: 15px; font-weight: 700; width: 100%; text-transform: uppercase; 
            cursor: pointer; transition: 0.3s; letter-spacing: 2px;
        }
        .pin-btn:active { transform: scale(0.95); opacity: 0.8; }

        .app-wrapper { display: flex; height: 100vh; width: 100vw; position: relative; }

        .sidebar { 
            position: fixed; right: -100%; top: 0; height: 100vh; width: 300px; 
            background: rgba(5, 5, 10, 0.95); border-left: 1px solid var(--border);
            padding: 40px 25px; display: flex; flex-direction: column; backdrop-filter: blur(30px);
            z-index: 2000; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }
        .sidebar.active { right: 0; }
        .sidebar-logo { display: flex; align-items: center; gap: 15px; margin-bottom: 40px; }
        .sidebar-logo span { font-weight: 700; font-size: 22px; letter-spacing: 1px; color: #fff; }
        .sidebar h2 { color: var(--primary); font-size: 11px; letter-spacing: 2px; margin: 30px 0 15px; text-transform: uppercase; opacity: 0.8; }
        
        .cmd-btn { 
            background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255,255,255,0.05); 
            color: #ccc; padding: 16px; border-radius: 18px; 
            margin-bottom: 12px; text-align: left; cursor: pointer; font-size: 14px;
            display: flex; align-items: center; gap: 15px; transition: 0.3s;
        }
        .cmd-btn i { font-size: 18px; color: var(--primary); }
        .cmd-btn:hover { background: rgba(0, 242, 255, 0.1); border-color: var(--primary); color: #fff; }

        .main-content { flex: 1; display: flex; flex-direction: column; width: 100%; height: 100vh; position: relative; }
        
        .header { 
            padding: calc(15px + env(safe-area-inset-top)) 25px 15px; 
            display: flex; align-items: center; justify-content: space-between; 
            background: rgba(2, 2, 4, 0.4); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border); 
        }
        .status { display: flex; align-items: center; gap: 12px; font-size: 14px; font-weight: 500; letter-spacing: 1.5px; color: #fff; }
        .dot { width: 10px; height: 10px; background: #00ff00; border-radius: 50%; animation: glowPulse 2s infinite; }

        .chat-container { flex: 1; overflow-y: auto; padding: 25px; display: flex; flex-direction: column; gap: 30px; padding-bottom: 130px; scroll-behavior: smooth; }
        
        .bubble { 
            max-width: 85%; padding: 18px 22px; font-size: 15px; line-height: 1.6; 
            word-wrap: break-word; animation: slideIn 0.5s ease backwards; backdrop-filter: blur(5px);
        }

        .user { align-self: flex-end; background: var(--user-bubble); color: white; border-radius: 25px 25px 5px 25px; box-shadow: 0 10px 20px rgba(142, 45, 226, 0.2); }
        .ai { align-self: flex-start; background: var(--ai-bubble); border: 1px solid var(--border); border-radius: 25px 25px 25px 5px; color: #e0e0e0; }

        .typing-dots span { display: inline-block; width: 6px; height: 6px; background: var(--primary); border-radius: 50%; margin: 0 2px; animation: typing 1s infinite; }
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        .input-box { position: absolute; bottom: 0; left: 0; width: 100%; padding: 25px 20px calc(30px + env(safe-area-inset-bottom)); background: linear-gradient(to top, var(--bg) 80%, transparent); }
        .input-inner { background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border); padding: 8px 8px 8px 25px; border-radius: 40px; display: flex; align-items: center; backdrop-filter: blur(15px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); transition: 0.3s; }
        .input-inner:focus-within { border-color: var(--primary); background: rgba(255, 255, 255, 0.08); }

        input#userInput { flex: 1; background: transparent; border: none; color: #fff; font-size: 16px; outline: none; }
        input#userInput::placeholder { color: #666; }
        
        .btn-send { background: var(--primary); color: #000; border: none; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 0 15px var(--primary-glow); }
        .btn-send:hover { transform: rotate(-15deg) scale(1.1); }
        .btn-send:active { transform: scale(0.9); }

        #darkOverlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: none; z-index: 1500; backdrop-filter: blur(5px); }
        
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }
    </style>
</head>
<body>

    <div id="pinOverlay">
        <div class="pin-box">
            <i class="fas fa-microchip" style="font-size: 45px; color: var(--primary); margin-bottom: 20px; text-shadow: 0 0 15px var(--primary-glow);"></i>
            <h2 style="color: #fff; font-size: 16px; letter-spacing: 3px; margin-bottom: 5px;">ADATA CORE v3.0</h2>
            <p style="font-size: 10px; color: #666; margin-bottom: 25px;">AUTHORIZED PERSONNEL ONLY</p>
            <input type="password" id="pinField" class="pin-input" maxlength="4" placeholder="••••" inputmode="numeric">
            <button class="pin-btn" onclick="validatePin()">ACCESS SYSTEM</button>
        </div>
    </div>

    <div class="app-wrapper">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-logo">
                <i class="fas fa-atom fa-spin" style="color: var(--primary); font-size: 24px;"></i>
                <span>ADATA CORE</span>
            </div>
            <h2>System Protocols</h2>
            <button class="cmd-btn" onclick="fillPrompt('Jelaskan konsep ini secara mendalam namun mudah dimengerti: ')"><i class="fas fa-brain"></i> Deep Learning</button>
            <button class="cmd-btn" onclick="fillPrompt('Buat draft balasan email/pesan profesional untuk: ')"><i class="fas fa-envelope-open-text"></i> Prof. Messaging</button>
            <button class="cmd-btn" onclick="fillPrompt('Beri saya 5 ide inovatif untuk: ')"><i class="fas fa-rocket"></i> Innovation Lab</button>
            
            <h2>System Tools</h2>
            <button class="cmd-btn" onclick="quickRingkas()"><i class="fas fa-compress-alt"></i> Data Summarizer</button>
            <button class="cmd-btn" onclick="resetApiKey()" style="margin-top: 20px; border-color: rgba(255, 77, 77, 0.3);"><i class="fas fa-key" style="color: #ff4d4d;"></i> Reset API Key</button>
        </div>

        <div id="darkOverlay" onclick="toggleSidebar()"></div>

        <div class="main-content">
            <div class="header">
                <div class="status">
                    <div class="dot"></div>
                    <span>CORE ACTIVE</span>
                </div>
                <div onclick="toggleSidebar()" style="cursor: pointer; padding: 10px;">
                    <i class="fas fa-bars-staggered" style="color: var(--primary); font-size: 22px;"></i>
                </div>
            </div>

            <div class="chat-container" id="chatBox">
                <div class="bubble ai">
                    <strong>Protocol ADATA Berhasil Dimuat.</strong><br>
                    Core v3.0 siap di bawah kendali Anda, Boss. Apa instruksi pertama hari ini?
                </div>
            </div>

            <div class="input-box">
                <div class="input-inner">
                    <input type="text" id="userInput" placeholder="Masukkan perintah ke Core..." onkeypress="if(event.key==='Enter') doSend()">
                    <button class="btn-send" onclick="doSend()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- API SECURITY LOGIC ---
        let savedKey = localStorage.getItem('ADATA_CORE_KEY');

        function checkKey() {
            if (!savedKey) {
                const userKey = prompt("SYSTEM SECURITY: Masukkan Groq API Key Anda:");
                if (userKey && userKey.trim() !== "") {
                    localStorage.setItem('ADATA_CORE_KEY', userKey.trim());
                    savedKey = userKey.trim();
                    alert("Key Berhasil Disimpan.");
                } else {
                    alert("Peringatan: Core tidak aktif tanpa API Key.");
                }
            }
        }
        checkKey();

        function resetApiKey() {
            if(confirm("Hapus API Key dari browser dan ganti yang baru?")) {
                localStorage.removeItem('ADATA_CORE_KEY');
                location.reload();
            }
        }

        // --- SYSTEM FUNCTIONS ---
        function validatePin() {
            if(document.getElementById('pinField').value === "1083") {
                const overlay = document.getElementById('pinOverlay');
                overlay.style.transition = '0.8s cubic-bezier(0.4, 0, 0.2, 1)';
                overlay.style.opacity = '0';
                overlay.style.transform = 'scale(1.1)';
                setTimeout(() => { overlay.style.display = 'none'; }, 800);
            } else {
                alert("ACCESS DENIED: PIN INVALID");
                document.getElementById('pinField').value = '';
            }
        }

        function toggleSidebar() {
            const sb = document.getElementById('sidebar');
            const ov = document.getElementById('darkOverlay');
            sb.classList.toggle('active');
            ov.style.display = sb.classList.contains('active') ? 'block' : 'none';
        }

        function fillPrompt(txt) {
            document.getElementById('userInput').value = txt;
            document.getElementById('userInput').focus();
            if(document.getElementById('sidebar').classList.contains('active')) toggleSidebar();
        }

        function quickRingkas() {
            fillPrompt('Ekstrak poin-poin terpenting dari data berikut: ');
        }

        async function doSend() {
            const input = document.getElementById('userInput');
            const box = document.getElementById('chatBox');
            const text = input.value.trim();
            
            if(!text) return;
            if(!savedKey) { checkKey(); return; }

            // User Message
            box.innerHTML += `<div class="bubble user">${text}</div>`;
            input.value = "";
            box.scrollTop = box.scrollHeight;

            // AI Typing Indicator
            const aiId = "ai-" + Date.now();
            box.innerHTML += `
                <div class="bubble ai" id="${aiId}">
                    <div class="typing-dots">
                        <span></span><span></span><span></span>
                    </div>
                </div>`;
            box.scrollTop = box.scrollHeight;

            try {
                const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${savedKey}`, // FIXED: Menggunakan variabel savedKey
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        model: "llama-3.3-70b-versatile",
                        messages: [{ role: "user", content: text }],
                        temperature: 0.7
                    })
                });

                const data = await response.json();
                const aiBubble = document.getElementById(aiId);
                
                if (data.choices && data.choices[0].message) {
                    let aiReply = data.choices[0].message.content;
                    aiReply = aiReply.replace(/\n/g, '<br>');
                    aiBubble.innerHTML = aiReply;
                } else {
                    aiBubble.innerHTML = "<span style='color: #ff4d4d;'>SYSTEM ERROR: Cek API Key Anda.</span>";
                }
            } catch (error) {
                document.getElementById(aiId).innerHTML = "<span style='color: #ff4d4d;'>CONNECTION_LOST: Check Core Link.</span>";
            }
            box.scrollTop = box.scrollHeight;
        }
    </script>
</body>
</html>
